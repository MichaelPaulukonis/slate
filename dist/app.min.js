!function(e){"object"==typeof exports&&"undefined"!=typeof module||"function"!=typeof define||!define.amd?e():define(e)}(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Backbone,l=c.Model,f=function(n){var r=function(){e(this,r),null!=n&&n.apply(this,arguments)};return t(r,n),u(r,[{key:"defaults",value:function(){return{bgColor:"#018790",textColor:"#fff",font:"Roboto, Times New Roman, Times, serif",text:"Generate your text here",width:400,height:400}}}]),r}(l),s=f,h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:SlateConfigView__get(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},p=Backbone,v=p.View,y=function(e){var t=function(e){n(this,t),_.defaults(e,{events:{"click #generate":"setAttributes"}}),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)};return r(t,e),h(t,[{key:"setAttributes",value:function(e){var t=$('[name="text"]').val();this.model.set({text:t})}}]),t}(v),g=y,w={setFont:function(e){e.font=this.fontHeight*this.scale+"px "+this.font},createDummy:function(){var e=document.createElement("canvas");return e.width=this.width*this.scale,e.height=this.height*this.scale,e.getContext("2d")},drawBackground:function(e){var t=e.canvas.width,n=e.canvas.height;e.fillStyle=this.bgColor,e.fillRect(0,0,t,n)},drawText:function(e,t){var n=e.canvas.width/2,r=e.canvas.height/2;e.textAlign="center",e.fillStyle=this.textColor,e.fillText(t,n,r)},drawDummy:function(e,t){var n=e.canvas.width,r=e.canvas.height;e.drawImage(t.canvas,0,0,n,r)},getCanvas:function(e){var t=document.createElement("canvas");return t.width=this.width,t.height=this.height,t},setProperties:function(e){this.bgColor=e.bgColor,this.height=e.height,this.width=e.width,this.text=e.text||"",this.textColor=e.textColor,this.delay=e.delay||350,this.fontHeight=e.fontHeight||40,this.scale=2},render:function(e){var t=this,n=t.getCanvas().getContext("2d"),r=t.createDummy(),o=t.getGifCreator(e);t.setFont(r);for(var i=this.text.split(" "),a=0,u=i.length;u>a;a++)t.drawBackground(r),t.drawText(r,i[a]),t.drawDummy(n,r),o.addFrame(n,{copy:!0,delay:t.delay});t.drawBackground(r),t.drawDummy(n,r),o.addFrame(n,{copy:!0,delay:t.delay}),o.render()},getGifCreator:function(e){var t=this,n=new GIF({workers:2,quality:10,width:t.width,height:t.height});return n.on("finished",function(t){e.src=URL.createObjectURL(t)}),n}},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:SlateView__get(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},x=Backbone,O=x.View,C=function(e){var t=function(e){o(this,t),m(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.listenTo(this.model,"change",this.render)};return i(t,e),b(t,[{key:"render",value:function(){w.setProperties(this.model.toJSON()),w.render(document.getElementById("result"))}}]),t}(O),k=C,j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function(){function e(){a(this,e)}return j(e,[{key:"render",value:function(){var e=new s;new g({model:e,el:$(".slate__config")}),new k({model:e,el:$(".slate__preview")})}}]),e}();(new T).render()});
