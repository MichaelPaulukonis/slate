!function(e){"object"==typeof exports&&"undefined"!=typeof module||"function"!=typeof define||!define.amd?e():define(e)}(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=Backbone,c=u.Model,l=function(n){var r=function(){e(this,r),null!=n&&n.apply(this,arguments)};return t(r,n),a(r,[{key:"defaults",value:function(){return{bgColor:"#018790",textColor:"#fff",font:"Roboto, Times New Roman, Times, serif",text:"Generate your text here",width:400,height:400}}}]),r}(c),f=l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=Backbone,d=h.View,p=function(e){var t=function(){n(this,t),null!=e&&e.apply(this,arguments)};return r(t,e),s(t,[{key:"initialize",value:function(){this.events={"click #generate":"setAttributes"}}},{key:"setAttributes",value:function(e){var t=$('[name="text"]').val();this.model.set({text:t})}}]),t}(d),y=p,v={setFont:function(e,t){e.font=this.fontHeight*t+"px "+this.font},createDummy:function(){var e=document.createElement("canvas");return e.width=this.width*this.scale,e.height=this.height*this.scale,e.getContext("2d")},drawBackground:function(e){var t=e.canvas.width,n=e.canvas.height;e.fillStyle=this.bgColor,e.fillRect(0,0,t,n)},drawText:function(e,t){var n=e.canvas.width/2,r=e.canvas.height/2;e.textAlign="center",e.fillStyle=this.textColor,e.fillText(t,n,r)},drawDummy:function(e,t){var n=e.canvas.width,r=e.canvas.height;e.drawImage(t.canvas,0,0,n,r)},getCanvas:function(e){var t=document.createElement("canvas");return t.width=this.width,t.height=this.height,t},setProperties:function(e){this.bgColor=e.bgColor,this.height=e.height,this.width=e.width,this.text=e.text||"",this.textColor=e.textColor,this.delay=e.delay||350,this.fontHeight=e.fontHeight||40,this.scale=2},render:function(e){var t=this,n=t.getCanvas().getContext("2d"),r=t.createDummy(),o=t.getGifCreator(e);t.setFont(r,this.scale);for(var i=this.text.split(" "),a=0,u=i.length;u>a;a++)t.drawBackground(r),t.drawText(r,i[a]),t.drawDummy(n,r),o.addFrame(n,{copy:!0,delay:t.delay});t.drawBackground(r),t.drawDummy(n,r),o.addFrame(n,{copy:!0,delay:t.delay}),o.render()},getGifCreator:function(e){var t=this,n=new GIF({workers:2,quality:10,width:t.width,height:t.height});return n.on("finished",function(t){e.src=URL.createObjectURL(t)}),n}},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),w=function k(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:k(o,t,n)}if("value"in r)return r.value;var i=r.get;return void 0===i?void 0:i.call(n)},b=Backbone,m=b.View,x=function(e){var t=function(e){o(this,t),w(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.listenTo(this.model,"change",this.render)};return i(t,e),g(t,[{key:"render",value:function(){this.model;v.setProperties(this.model.toJSON()),v.render(document.getElementById("result"))}}]),t}(m),C=x,_=new f;new y({model:_,el:$(".slate__config")}),new C({model:_,el:$(".slate__preview")})});
